import{r as u,w as $,o as D,c as l,a as s,b as g,v as F,d as C,F as h,e as k,f as b,t as r,g as V,h as a}from"./app-CQ7I1hI5.js";const N=["value"],A={key:0,for:"city-select"},E=["value"],L={key:2},Q={key:3},T={key:4},j={key:0},q={key:1},z={key:5,class:"pagination"},G=["disabled"],H=["disabled"],w=20,K={__name:"App",setup(I){const _=u([]),f=u([]),x=u([]),y=u(!1),i=u(null),c=u(null),v=u(""),m=u(""),n=u(0),d=u(1),P=async()=>{try{const e=await V.get("https://api.hh.ru/areas");_.value=e.data}catch(e){console.error("Ошибка при загрузке стран:",e),i.value="Ошибка загрузки стран"}};$(c,()=>{const e=_.value.find(o=>o.id===c.value);f.value=e?e.areas:[],v.value="",n.value=0,p()});const M=e=>e.from&&e.to?`${e.from} - ${e.to} ${e.currency}`:e.from?`от ${e.from} ${e.currency}`:e.to?`до ${e.to} ${e.currency}`:"Не указана",p=async()=>{y.value=!0,i.value=null;try{const e=await V.get("/data",{params:{country:c.value||null,city:v.value||null,text:m.value,page:n.value,per_page:w}});x.value=e.data.items,d.value=Math.ceil(e.data.found/w)}catch(e){console.error("Ошибка при загрузке данных:",e),i.value="Ошибка загрузки данных"}finally{y.value=!1}},B=()=>{n.value<d.value-1&&(n.value+=1,p())},S=()=>{n.value>0&&(n.value-=1,p())};return $([m,v],()=>{n.value=0,p()}),D(()=>{P(),p()}),(e,o)=>(a(),l("div",null,[o[4]||(o[4]=s("label",{for:"search-input"},"Поиск вакансий по названию:",-1)),g(s("input",{type:"text",id:"search-input","onUpdate:modelValue":o[0]||(o[0]=t=>m.value=t),placeholder:"Введите название вакансии"},null,512),[[F,m.value]]),o[5]||(o[5]=s("label",{for:"country-select"},"Выберите страну:",-1)),g(s("select",{id:"country-select","onUpdate:modelValue":o[1]||(o[1]=t=>c.value=t)},[(a(!0),l(h,null,k(_.value,t=>(a(),l("option",{key:t.id,value:t.id},r(t.name),9,N))),128))],512),[[C,c.value]]),f.value.length>0?(a(),l("label",A,"Выберите город:")):b("",!0),f.value.length>0?g((a(),l("select",{key:1,id:"city-select","onUpdate:modelValue":o[2]||(o[2]=t=>v.value=t)},[o[3]||(o[3]=s("option",{value:""},"Все города",-1)),(a(!0),l(h,null,k(f.value,t=>(a(),l("option",{key:t.id,value:t.id},r(t.name),9,E))),128))],512)),[[C,v.value]]):b("",!0),y.value?(a(),l("p",L,"Загрузка данных...")):i.value?(a(),l("p",Q,r(i.value),1)):(a(),l("ul",T,[(a(!0),l(h,null,k(x.value,(t,U)=>(a(),l("li",{key:U},[s("p",null,[s("strong",null,r(t.name),1)]),t.salary?(a(),l("p",j," Зарплата: "+r(M(t.salary)),1)):(a(),l("p",q," Зарплата: Не указана "))]))),128))])),d.value>1?(a(),l("div",z,[s("button",{onClick:S,disabled:n.value===0},"Назад",8,G),s("span",null,"Страница "+r(n.value+1)+" из "+r(d.value),1),s("button",{onClick:B,disabled:n.value===d.value-1},"Вперед",8,H)])):b("",!0)]))}};export{K as default};
